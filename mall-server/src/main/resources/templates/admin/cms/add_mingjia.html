<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="utf-8" />
    <title>云网传媒后台主页</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Preview page of Metronic Admin Theme #1 for statistics, charts, recent events and reports" name="description" />
    <meta content="" name="author" />

    </head>

    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <!-- BEGIN PAGE HEADER-->
            <!-- BEGIN PAGE BAR -->
            <div class="page-bar">
                <ul class="page-breadcrumb">
                    <li>
                        <a href="index.html">首页</a>
                        <i class="fa fa-circle"></i>
                    </li>
                    <li>
                        <span>名家编辑</span>
                    </li>
                </ul>
            </div>
            <h1 class="page-title"> 名家编辑
                    <small>名家编辑</small>
            </h1>
            <!-- 内容展示 -->
            <div class="portlet light bordered">
            <div class="row">
                <div class="col-md-12">
                    <form class="form-horizontal" action="/admin/cms/saveAuth" id='addform' method="post">
                    	<!-- 操作类型 -->
                    		<input type='text'  name='type' style="display:none" th:value="${auth==null}?'SAVE':'UPDATE'">
                    		<input type='text'  name='id' style="display:none" th:value="${auth==null}?'':${auth.id}">
                          <div class="form-group">
                                <label for="" class="col-sm-2 control-label">栏目</label>
                                <div class="col-sm-4">
                                	<input type='text'  name='Pid' style="display:none" th:value="${Pid}">
                                    <select class="form-control"  name='columns'>
                                      <option th:attr="value=${Pid}" selected>名家荟萃</option>
                                  </select>
                               </div>
                          </div>
                      <div class="form-group">
                        <label for="" class="col-sm-2 control-label">名家姓名</label>
                        <div class="col-sm-4">
                          <input type="text" class="form-control"  placeholder="请输入姓名" name="authorname" th:value="${auth}==null?'':${auth.authorname}">
                        </div>
                      </div>
                      <div class="form-group">
                            <label for="" class="col-sm-2 control-label">艺术分类</label>
                            <div class="col-sm-4">
                            	
                                <select class="form-control" name="classification">
                                  <option th:each="ca:${Category}" th:attr="value=${ca.id}" th:text="${ca.ladelname}">书法</option>
                                  
                              </select>
                           </div>
                      </div>
                      <div class="form-group">
                            <label for="" class="col-sm-2 control-label">作者地区</label>
                            <div class="col-sm-4">
                                <select class="form-control" name="address">
                                  <option>北京</option>
                                  <option>天津</option>
                                  <option>河北</option>
                                  <option>山西</option>
                                  <option>内蒙古</option>
                                  <option>辽宁</option>
                                  <option>吉林</option>
                                  <option>黑龙江</option>
                                  <option>上海</option>
                                  <option>江苏</option>
                                  <option>浙江</option>
                                  <option>安徽</option>
                                  <option>福建</option>
                                  <option>浙江</option>
                                  <option>江西</option>
                                  <option>山东</option>
                                  <option>河南</option>
                                  <option>湖南</option>
                                  <option>湖北</option>
                                  <option>广东</option>
                                  <option>广西</option>
                                  <option>海南</option>
                                  <option>重庆</option>
                                  <option>四川</option>
                                  <option>贵州</option>
                                  <option>云南</option>
                                  <option>西藏</option>
                                  <option>陕西</option>
                                  <option>甘肃</option>
                                  <option>青海</option>
                                  <option>宁夏</option>
                                  <option>新疆</option>
                              </select>
                           </div>
                      </div>
                      <div class="form-group">
                            <label for="" class="col-sm-2 control-label">职位</label>
                            <div class="col-sm-4">
                                <select class="form-control" name="position">
                                  <option>八大美院</option>
                                  <option>国家画院</option>
                                  <option>国家级工艺美术师</option>
                                  <option>中国美协主席团</option>
                                  <option>中国书协主席团</option>
                                  <option>中国美协理事 </option>
                                  <option>中国书协理事  </option>
                                  <option>省级美协主席团 </option>
                                  <option>省级书协主席团 </option>
                                  <option>中国美协会员  </option>
                                  <option>中国书协会员</option>
                                  <option>省级美协会员</option>
                                  <option>中省级书协会员 </option>
                                  <option>省级工艺美术师</option>
                                  <option>民间大家</option>
                                  <option>其他</option>
                              </select>
                           </div>
                      </div>
                      <div class="form-group">
                            <label for="" class="col-sm-2 control-label">名家照片上传</label>
                            <div class="col-sm-2">
                                <input type="file"  enctype="multipart/form-data"  class="form-control"  placeholder="点击上传图片" name='file'>
                           </div>
                           <div class="col-sm-2">
                           <input type='text' id='viewImg' name='viewimg' style="display:none" th:value="${auth}==null?'':${auth.viewimg}">
                                <button type='button' class="btn btn-defulat" id='uploadefile'>点击上传</button>
                           </div>
                      </div>
                      <div class="form-group">
                            <label for="" class="col-sm-2 control-label">名家简介</label>
                            <div class="col-sm-4">
                                <textarea class="form-control" rows="3" name="introduction" th:text="${auth}==null?'':${auth.Introduction}"></textarea>
                            </div>
                        </div>
                      <!-- 编辑器 -->
                      <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.config.js"></script>
                      <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.all.min.js"> </script>
                      <script type="text/javascript" charset="utf-8" src="/ueditor/lang/zh-cn/zh-cn.js"></script>

                      <div class="form-group">
                            <label for="" class="col-sm-2 control-label">详细内容</label>
                            <div class="col-sm-2">
                                <script id="editor" type="text/plain" style="width:800px;height:500px;"></script>
                                
                           </div>
                      </div>

                      <script type="text/javascript" th:inline="javascript">
                        //实例化编辑器
                        //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
                        var ue = UE.getEditor('editor');
                        var blg=[[${auth}!=null]];
                        var att=[[${auth}]];
                        
                        $(document).ready(function () {
                            
                            ue.ready(function () {
                            	if(blg){
                        			console.log('-----------------------');
                        			//初始化编辑器
                        			var content=[[${auth}==null?'':${auth.content}]];
                        			ue.setContent(content);
                        			
                        		}
                            });
                           
                        });
                    </script>
                     
                     <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                          <div class="checkbox">
                            <label>
                              <input type="checkbox" name="recommended" th:attr="checked=${auth!=null and auth.recommended=='on'}?'checked':''">设为推荐
                            </label>
                          </div>
                        </div>
                      </div>
                      
                      <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                          <button type="submit" class="btn btn-success">保存</button>
                        </div>
                      </div>
                    </form>
                </div>
            </div>
            </div>
            <div class="clearfix"></div>
            
        </div>
        <!-- END CONTENT BODY -->
    </div>
    <script src="http://malsup.github.com/jquery.form.js"></script>
    <script type="text/javascript" th:inline="javascript">
	$(function(){
		
		$('#uploadefile').click(function(){
			
			//上传首页图片
			
			var option = {
	            url:'/ueditor/uploade',//如果不指定url那么就使用使用提交表单的url，如果指定就使用当前的url
	            type:"POST",
	            dataType:"json",
	            success:function(date){
	            	if(date==null){
						//图片上传失败
						$("#uploadmsg").text='上传失败！';
					}
					for(var i=0,l=date.length;i<l;i++){
						//上传成功
						console.log(date[i].id);
						$("#viewImg").attr('value',date[i].id);
						//$("#mainimg").attr('src',date[i].host+'/'+date[i].path);
						//$("#mainimg").attr('width','50px');
					
					}
	            },
	            error:function(){
	                alert("系统错误");
	            }
	       };
	      $("#addform").ajaxSubmit(option);
		})
		
		
	})
	
	</script>
    

</body>

</html>
